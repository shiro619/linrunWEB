webpackJsonp([17],{"1+Bi":function(t,e,a){var i=a("tAm0");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("c44bdb58",i,!0)},Hd7O:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,'\n.el-tree-node__content{\n   \t\theight: 40px;\n}\n.el-tree-node__content .el-tree-node__label{font-size: 18px;\n}\n.el-tree-node__children .el-tree-node__label{font-size: 14px;\n}\n.el-icon-caret-right:before{\n \t\tcontent: "\\E601";\n}\n.el-tree-node__expand-icon.expanded{\n      -webkit-transform: rotate(0deg);\n              transform: rotate(0deg);\n}\n.el-tree-node__expand-icon.expanded:before{\n    \tcontent: "\\E635";\n}\n.el-tree-node__expand-icon{color:#357CED;\n}\n.el-icon-caret-right.is-leaf{\n    \tcolor: #357CED;\n}\n.el-icon-caret-right.is-leaf:before{\n \t\tcontent: "\\E62D";\n}\n.el-form-item{margin-bottom: 25px;\n}\n.add-h-title{\nfont-size: 18px;\ncolor: #4A4A4A;\nletter-spacing: 0;margin-top: -1.33em;\n}\n.el-select{width: 100%;\n}\n.app-container{padding: 0px;background: #fff;\n}\n',""])},kLBf:function(t,e,a){var i=a("Hd7O");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("b4047694",i,!0)},mOyH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("woOf"),n=a.n(i),o=a("vKQe"),r=a("IubA"),s=a("viA7"),l=a("cAgV"),c=a("TIfe"),d=(a("7+uW"),[{key:"0",display_name:"按姓名"},{key:"1",display_name:"按业务地区"},{key:"2",display_name:"按账号"}]),p=d.reduce(function(t,e){return t[e.key]=e.display_name,t},{}),u={name:"complexTable",directives:{waves:l.a},components:{pre_data:o.a},data:function(){var t=this;return{ruleForm:{password:"",confirm_password:""},preData:o.a,cityData:this.get_city(),townData:this.get_town(),preData2:o.a,cityData2:this.get_city2(),townData2:this.get_town2(),postForm:"request",data:[""],defaultProps:{children:"children",label:"label"},tableKey:0,list:null,total:null,listLoading:!0,listQuery:{token:Object(c.a)(),page:1,size:10,importance:void 0,title:void 0,type:void 0,sort:"+id",condition:"",keyword:""},importanceOptions:[1,2,3],calendarTypeOptions:d,sortOptions:[{label:"按ID升序列",key:"+id"},{label:"按ID降序",key:"-id"}],statusOptions:["published","draft","deleted"],showAuditor:!1,temp:{id:void 0,importance:1,remark:"",timestamp:new Date,title:"",type:"",status:"published",account:"",name:"",province:"110000",city:"杭州市",town:"滨江",area_add:"",oldaccount:""},temp_add:{token:Object(c.a)(),account:"",name:"",password:"",password_confirm:"",province:"",city:"",town:"",area_add:"",type:""},temp_add2:{token:Object(c.a)(),account:"",name:"",password:"",password_confirm:"",province:"",city:"",town:"",area_add:"",type:""},dialogFormVisible:!1,dialogAddFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"创建"},dialogPvVisible:!1,pvData:[],rules:{type:[{required:!0,message:"type is required",trigger:"change"}],timestamp:[{type:"date",required:!0,message:"timestamp is required",trigger:"change"}],password:[{validator:function(e,a,i){""===a?i(new Error("请输入密码")):(""!==t.temp_add2.password_confirm&&t.$refs.dataForm2.validateField("password_confirm"),i())},trigger:"blur"}],password_confirm:[{validator:function(e,a,i){""===a?i(new Error("请再次输入密码")):a!==t.temp_add2.password?i(new Error("两次输入密码不一致!")):i()},trigger:"change"}]}}},filters:{statusFilter:function(t){return{published:"success",draft:"info",deleted:"danger"}[t]},typeFilter:function(t){return p[t]}},created:function(){this.getList()},computed:{search_time:function(){return[Date.parse(this.searchtime[0])/1e3,Date.parse(this.searchtime[1])/1e3]},searchdata:function(){return{page:this.srarch_page,size:this.search_size,type:this.search_type,request_no:this.search_request_no,customer_name:this.search_customer_name,product_name:this.search_product_name,start_time:this.search_time[0],end_time:this.search_time[1],role_id:80,token:Object(c.a)()}}},methods:{getList:function(t){var e=this,a=e.listQuery;t&&(a.role_id=t),e.listLoading=!0;var i={data:e.listQuery,success:function(t){e.list=t.result.rows,e.total=Number(t.result.total),e.listLoading=!1},error:function(){}};r.a.role_Slist(i)},addUserData:function(){var t=this,e={data:t.temp_add2,success:function(e){200==e.error_no?(t.$notify({title:"成功",message:"添加用户成功",type:"success",duration:2e3}),t.getList()):t.$notify({title:"失败",message:e.error_msg,type:"error",duration:2e3})},error:function(t){}};r.a.adduser_all(e)},clearAddForm:function(){var t=this.temp_add2;for(var e in t)this.temp_add2[e]=""},handleAdd:function(){this.dialogAddFormVisible=!0},get_city:function(t){for(var e in this.preData)this.preData[e].text==this.temp.province&&(this.cityData=this.preData[e].children,this.temp.city=this.cityData[0].text);this.get_town()},get_town:function(t){for(var e in this.cityData)this.cityData[e].text==this.temp.city&&(this.townData=this.cityData[e].children,this.temp.town=this.townData[0].text)},get_city2:function(t){for(var e in this.preData2)this.preData2[e].text==this.temp_add2.province&&(this.cityData2=this.preData2[e].children,this.temp_add2.city=this.cityData2[0].text);this.get_town2()},get_town2:function(t){for(var e in this.cityData2)this.cityData2[e].text==this.temp_add2.city&&(this.townData2=this.cityData2[e].children,this.temp_add2.town=this.townData2[0].text)},handleFilter:function(){this.listQuery.page=1,this.getList()},handleSizeChange:function(t){this.listQuery.size=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleModifyStatus:function(t,e){this.$message({message:"操作成功",type:"success"}),t.status=e},resetTemp:function(){this.temp={id:void 0,importance:1,remark:"",timestamp:new Date,title:"",status:"published",type:""}},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},createData:function(){r.a.getList({data:{},success:function(t){},error:function(){}})},handleUpdate:function(t){this.dialogStatus="update",this.temp.account=t.account,this.temp.oldaccount=t.account,this.temp.name=t.name,this.dialogFormVisible=!0,this.temp.province=t.province,this.get_city(),this.get_town(),this.temp.city=t.city,this.temp.town=t.town,this.temp.area_add=t.area_add},updateData:function(){var t=this;t.temp.role="",t.temp.user="";var e={data:{token:Object(c.a)(),account:t.temp.account,name:t.temp.name,province:t.temp.province,city:t.temp.city,town:t.temp.town,area_add:t.temp.area_add,oldaccount:t.temp.oldaccount},success:function(e){200==e.error_no?(t.dialogFormVisible=!1,t.$notify({title:"成功",message:"编辑成功",type:"success",duration:2e3}),t.getList()):t.$notify({title:"错误",message:e.error_msg,type:"error",duration:2e3})},error:function(t){}};r.a.edit_role(e)},open_xw:function(t){var e=this;this.$confirm("是否删除这个用户？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.handleDelete(t)}).catch(function(){e.$notify({title:"取消",message:"已取消删除",type:"info",duration:2e3})})},handleDelete:function(t){var e=n()({},t),a=this,i={data:{token:Object(c.a)(),user_id:e.id,account:e.account},success:function(t){200==t.error_no?(a.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),a.getList()):a.$notify({title:"错误",message:t.error_msg,type:"error",duration:2e3})},error:function(t){}};r.a.delete_role3(i)},handleFetchPv:function(t){var e=this;Object(s.b)(t).then(function(t){e.pvData=t.data.pvData,e.dialogPvVisible=!0})},handleDownload:function(){var t=this;Promise.all([a.e(51),a.e(50)]).then(function(){(0,a("zWO4").export_json_to_excel)(["时间","地区","类型","标题","重要性"],t.formatJson(["timestamp","province","type","title","importance"],t.list),"table数据")}.bind(null,a)).catch(a.oe)},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return"timestamp"===t?parseTime(e[t]):e[t]})})}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"role-container"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("h4",{staticClass:"add-h-title"},[t._v("添加用户")]),t._v(" "),a("el-form",{ref:"dataForm2",staticStyle:{width:"100%"},attrs:{rules:t.rules,model:t.temp_add2,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{label:"客户姓名",prop:"name2"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.temp_add2.name,callback:function(e){t.$set(t.temp_add2,"name",e)},expression:"temp_add2.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"业务地区",prop:"province"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"省"},on:{change:t.get_city2},model:{value:t.temp_add2.province,callback:function(e){t.$set(t.temp_add2,"province",e)},expression:"temp_add2.province"}},t._l(t.preData2,function(t){return a("el-option",{key:t.value,attrs:{label:t.text,value:t.text}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"",prop:"city"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"市"},on:{change:t.get_town2},model:{value:t.temp_add2.city,callback:function(e){t.$set(t.temp_add2,"city",e)},expression:"temp_add2.city"}},t._l(t.cityData2,function(t){return a("el-option",{key:t.value,attrs:{label:t.text,value:t.text}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"",prop:"town"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"市辖区"},model:{value:t.temp_add2.town,callback:function(e){t.$set(t.temp_add2,"town",e)},expression:"temp_add2.town"}},t._l(t.townData2,function(t){return a("el-option",{key:t.value,attrs:{label:t.text,value:t.text}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"账号",prop:"add_account"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入手机号"},model:{value:t.temp_add2.account,callback:function(e){t.$set(t.temp_add2,"account",e)},expression:"temp_add2.account"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.temp_add2.password,callback:function(e){t.$set(t.temp_add2,"password",e)},expression:"temp_add2.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"password_confirm"}},[a("el-input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:t.temp_add2.password_confirm,callback:function(e){t.$set(t.temp_add2,"password_confirm",e)},expression:"temp_add2.password_confirm"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{float:"right"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{width:"90px"},on:{click:t.clearAddForm}},[t._v("重置信息")]),t._v(" "),a("el-button",{staticStyle:{width:"90px"},attrs:{type:"primary"},on:{click:t.addUserData}},[t._v("创建")])],1)],1)]),t._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[a("div",{staticClass:"table-box"},[[a("div",{staticClass:"app-container calendar-list-container"},[a("div",{staticClass:"filter-container"},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"25%"},attrs:{clearable:"",placeholder:"按业务地区查询"},model:{value:t.listQuery.condition,callback:function(e){t.$set(t.listQuery,"condition",e)},expression:"listQuery.condition"}},t._l(t.calendarTypeOptions,function(t){return a("el-option",{key:t.key,attrs:{label:t.display_name,value:t.key}})})),t._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"55%"},attrs:{placeholder:"标题"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.handleFilter(e)}},model:{value:t.listQuery.keyword,callback:function(e){t.$set(t.listQuery,"keyword",e)},expression:"listQuery.keyword"}}),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{width:"15%",float:"right"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("查询")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"用户名",width:"160px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"200px",align:"center",label:"业务地区"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.business_area))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"120px",align:"center",label:"账号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.account))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"150px",align:"center",label:"员工号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.employee_number))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"200px","class-name":"small-padding"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.handleUpdate(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.open_xw(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{label:"账号",prop:"account"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入账号"},model:{value:t.temp.account,callback:function(e){t.$set(t.temp,"account",e)},expression:"temp.account"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:t.temp.name,callback:function(e){t.$set(t.temp,"name",e)},expression:"temp.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"省份",prop:"province"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},on:{change:t.get_city},model:{value:t.temp.province,callback:function(e){t.$set(t.temp,"province",e)},expression:"temp.province"}},t._l(t.preData,function(t){return a("el-option",{key:t.text,attrs:{label:t.text,value:t.text}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"市",prop:"city"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},on:{change:t.get_town},model:{value:t.temp.city,callback:function(e){t.$set(t.temp,"city",e)},expression:"temp.city"}},t._l(t.cityData,function(t){return a("el-option",{key:t.text,attrs:{label:t.text,value:t.text}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"区/地域",prop:"town"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:t.temp.town,callback:function(e){t.$set(t.temp,"town",e)},expression:"temp.town"}},t._l(t.townData,function(t){return a("el-option",{key:t.text,attrs:{label:t.text,value:t.text}})}))],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),"create"==t.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v("确 定")]):a("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.temp_add.title,visible:t.dialogAddFormVisible},on:{"update:visible":function(e){t.dialogAddFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp_add,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"account"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入账号"},model:{value:t.temp_add.loginnames,callback:function(e){t.$set(t.temp_add,"loginnames",e)},expression:"temp_add.loginnames"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogAddFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addData()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"阅读数统计",visible:t.dialogPvVisible},on:{"update:visible":function(e){t.dialogPvVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.pvData,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"key",label:"渠道"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pv",label:"pv"}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogPvVisible=!1}}},[t._v("确 定")])],1)],1)],1)]],2),t._v(" "),a("div")])])],1)],1)])},staticRenderFns:[]},f=a("VU/8")(u,m,!1,function(t){a("1+Bi"),a("kLBf")},"data-v-088b11c4",null);e.default=f.exports},tAm0:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.main-container[data-v-088b11c4], .content[data-v-088b11c4] {\n  width: 100%;\n  background: #F3F5F9 !important;\n  min-height: 750px;\n  padding: 50px 45px;\n}\n.grid-content[data-v-088b11c4] {\n  border-radius: 5px;\n  padding: 60px 50px;\n  background: #fff;\n  position: relative;\n}\n.add-btn[data-v-088b11c4] {\n  position: absolute;\n  right: 60px;\n  width: 80px;\n  height: 30px;\n  top: 60px;\n  padding: 0;\n}\n.tree-container[data-v-088b11c4] {\n  width: 60%;\n}\n",""])}});